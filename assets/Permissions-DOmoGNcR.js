import{_ as L,aO as W,y as X,v as m,I as h,J as k,M as s,R as n,T as a,O as S,P as T,X as H,K as U,aQ as g,B as u,Q as d,U as N,aP as Y,aR as z,V as F,h as p}from"./index-CAuj7ceO.js";import{N as Z,A as ee}from"./Add-BMzGieyV.js";import{a as le,N as ae}from"./Checkbox-DaFERd3F.js";import{C as te,N as se,T as ne}from"./Trash-COOWCMH4.js";import{a as ie,N as oe}from"./Tabs-iBlVM3IQ.js";import{N as q,a as _}from"./FormItem-Ca4r8WPB.js";import{N as x}from"./Input-CD8GsJOj.js";import{a as ue}from"./Pagination-JsrDlLZe.js";import"./Add-a8GTv_U1.js";const re={class:"permissions-container"},de={class:"role-content"},pe={class:"role-header"},me={__name:"Permissions",setup(ve){const{width:B}=W(),C=X(()=>B.value<=768),r=m([{id:1,name:"輪播圖管理員",description:"管理輪播圖相關權限",permissions:[]},{id:2,name:"文章管理員",description:"管理文章相關權限",permissions:[]},{id:3,name:"應用程式管理員",description:"管理應用程式相關權限",permissions:[]},{id:4,name:"系統管理員",description:"管理系統相關權限",permissions:[]},{id:5,name:"導覽列管理員",description:"管理導覽列相關權限",permissions:[]}]),w=[{label:"文章",value:"article"},{label:"輪播圖",value:"carousel"},{label:"應用程式",value:"application"},{label:"系統",value:"system"},{label:"導覽列",value:"navigation"}],P={article:[{label:"策略營地",value:"strategy-camp"},{label:"40周年",value:"40th-anniversary"},{label:"數智入口",value:"digital-entrance"}],carousel:[{label:"首頁輪播",value:"home"},{label:"活動輪播",value:"event"}],application:[{label:"策略工具",value:"strategy-tools"},{label:"數智工具",value:"digital-tools"}],system:[{label:"用戶管理",value:"user-management"},{label:"權限管理",value:"permission-management"}],navigation:[{label:"主導覽",value:"main"},{label:"次導覽",value:"sub"}]},I=[{title:"權限名稱",key:"name"},{title:"權限類型",key:"type",render(t){const e=w.find(l=>l.value===t.type);return e?e.label:"-"}},{title:"權限範圍",key:"scopes",render(t){return t.scopes.map(l=>{var R;const y=(R=P[t.type])==null?void 0:R.find(K=>K.value===l);return y?y.label:l}).join(", ")}},{title:"操作",key:"actions",render(t){return p(g,{},{default:()=>[p(u,{size:"small",type:"primary",onClick:()=>G(t)},{default:()=>"編輯",icon:()=>p(N,null,{default:()=>p(te)})}),p(se,{onPositiveClick:()=>Q(t)},{default:()=>"確認刪除？",trigger:()=>p(u,{size:"small",type:"error"},{default:()=>"刪除",icon:()=>p(N,null,{default:()=>p(ne)})})})]})}}],D={pageSize:10},v=m(!1),f=m(!1),c=m(null),b=m(null),o=m({name:"",description:""}),i=m({name:"",type:null,scopes:[]}),M={name:{required:!0,message:"請輸入角色名稱",trigger:["blur","input"]}},O={name:{required:!0,message:"請輸入權限名稱",trigger:["blur","input"]},type:{required:!0,message:"請選擇權限類型",trigger:["blur","change"]},scopes:{required:!0,message:"請選擇權限範圍",trigger:["blur","change"]}},$=()=>{c.value=null,o.value={name:"",description:""},v.value=!0},A=t=>{c.value=t,o.value={name:t.name,description:t.description},v.value=!0},V=t=>{const e=r.value.findIndex(l=>l.id===t.id);e!==-1&&r.value.splice(e,1)},j=()=>{if(c.value){const t=r.value.find(e=>e.id===c.value.id);t&&(t.name=o.value.name,t.description=o.value.description)}else{const t={id:Date.now(),name:o.value.name,description:o.value.description,permissions:[]};r.value.push(t)}v.value=!1},E=t=>{b.value=null,i.value={name:"",type:null,scopes:[]},f.value=!0},G=t=>{b.value=t,i.value={name:t.name,type:t.type,scopes:[...t.scopes]},f.value=!0},Q=t=>{const e=r.value.find(l=>l.permissions.includes(t));if(e){const l=e.permissions.indexOf(t);l!==-1&&e.permissions.splice(l,1)}},J=()=>{const t={id:Date.now(),name:i.value.name,type:i.value.type,scopes:i.value.scopes};if(b.value){const e=r.value.find(l=>l.permissions.includes(b.value));if(e){const l=e.permissions.indexOf(b.value);l!==-1&&(e.permissions[l]=t)}}else{const e=r.value.find(l=>l.id===c.value.id);e&&e.permissions.push(t)}f.value=!1};return(t,e)=>(k(),h("div",re,[s(a(Y),{title:"權限管理",class:"mb-4"},{"header-extra":n(()=>[s(a(u),{type:"primary",onClick:$},{icon:n(()=>[s(a(N),null,{default:n(()=>[s(a(ee))]),_:1})]),default:n(()=>[e[9]||(e[9]=d(" 新增角色群組 "))]),_:1,__:[9]})]),default:n(()=>[s(a(ie),{type:"line",animated:""},{default:n(()=>[(k(!0),h(S,null,T(r.value,l=>(k(),H(a(oe),{key:l.id,name:l.id,tab:l.name},{default:n(()=>[U("div",de,[U("div",pe,[s(a(g),null,{default:n(()=>[s(a(u),{type:"primary",onClick:y=>E(l)},{default:n(()=>e[10]||(e[10]=[d(" 新增權限 ")])),_:2,__:[10]},1032,["onClick"]),s(a(u),{onClick:y=>A(l)},{default:n(()=>e[11]||(e[11]=[d("編輯角色")])),_:2,__:[11]},1032,["onClick"]),s(a(u),{type:"error",onClick:y=>V(l)},{default:n(()=>e[12]||(e[12]=[d("刪除角色")])),_:2,__:[12]},1032,["onClick"])]),_:2},1024)]),s(a(Z),{columns:I,data:l.permissions,pagination:D,bordered:!1},null,8,["data"])])]),_:2},1032,["name","tab"]))),128))]),_:1})]),_:1}),s(a(F),{show:v.value,"onUpdate:show":e[3]||(e[3]=l=>v.value=l),preset:"card",style:z({width:"90vw",height:C.value?"1050px":"860px"}),title:c.value?"編輯角色群組":"新增角色群組",bordered:!1,size:"huge"},{footer:n(()=>[s(a(g),{justify:"end"},{default:n(()=>[s(a(u),{onClick:e[2]||(e[2]=l=>v.value=!1)},{default:n(()=>e[13]||(e[13]=[d("取消")])),_:1,__:[13]}),s(a(u),{type:"primary",onClick:j},{default:n(()=>e[14]||(e[14]=[d("保存")])),_:1,__:[14]})]),_:1})]),default:n(()=>[s(a(q),{ref:"roleFormRef",model:o.value,rules:M,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:n(()=>[s(a(_),{label:"角色名稱",path:"name"},{default:n(()=>[s(a(x),{value:o.value.name,"onUpdate:value":e[0]||(e[0]=l=>o.value.name=l),placeholder:"請輸入角色名稱"},null,8,["value"])]),_:1}),s(a(_),{label:"角色描述",path:"description"},{default:n(()=>[s(a(x),{value:o.value.description,"onUpdate:value":e[1]||(e[1]=l=>o.value.description=l),type:"textarea",placeholder:"請輸入角色描述"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","style","title"]),s(a(F),{show:f.value,"onUpdate:show":e[8]||(e[8]=l=>f.value=l),preset:"card",style:z({width:"90vw",height:C.value?"1050px":"860px"}),title:b.value?"編輯權限":"新增權限",bordered:!1,size:"huge"},{footer:n(()=>[s(a(g),{justify:"end"},{default:n(()=>[s(a(u),{onClick:e[7]||(e[7]=l=>f.value=!1)},{default:n(()=>e[15]||(e[15]=[d("取消")])),_:1,__:[15]}),s(a(u),{type:"primary",onClick:J},{default:n(()=>e[16]||(e[16]=[d("保存")])),_:1,__:[16]})]),_:1})]),default:n(()=>[s(a(q),{ref:"permissionFormRef",model:i.value,rules:O,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:n(()=>[s(a(_),{label:"權限名稱",path:"name"},{default:n(()=>[s(a(x),{value:i.value.name,"onUpdate:value":e[4]||(e[4]=l=>i.value.name=l),placeholder:"請輸入權限名稱"},null,8,["value"])]),_:1}),s(a(_),{label:"權限類型",path:"type"},{default:n(()=>[s(a(ue),{value:i.value.type,"onUpdate:value":e[5]||(e[5]=l=>i.value.type=l),options:w,placeholder:"請選擇權限類型"},null,8,["value"])]),_:1}),s(a(_),{label:"權限範圍",path:"scopes"},{default:n(()=>[s(a(le),{value:i.value.scopes,"onUpdate:value":e[6]||(e[6]=l=>i.value.scopes=l)},{default:n(()=>[s(a(g),{vertical:""},{default:n(()=>[(k(),h(S,null,T(P,l=>s(a(ae),{key:l.value,value:l.value,label:l.label},null,8,["value","label"])),64))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","style","title"])]))}},xe=L(me,[["__scopeId","data-v-2ee5d46e"]]);export{xe as default};
